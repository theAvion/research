<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="employerStyle.css">
  </head>
  <body id="employer">
      <div class="formbox">
        <center>  <h1> Business Registeration Form</h1> </center>
        <hr>
          <form id="employerForm">
            <table>
              <tr>
                <td>
                    <label for="cname">Business Name</label>
                </td>
                <td>
                  <input id="cname" type="text" name="cname" value="">
                </td>
              </tr>
              <tr>
                <td>
                    <label for="cadd">Business Address</label>
                </td>
                <td><textarea id="cadd" name="cadd" rows="8" cols="80"></textarea></td>
              </tr>
              <tr>
                <td>
                    <label for="ctel">Telephone</label>
                </td>
                <td>
                  <input id="ctel" type="text" name="ctel" value="">
                </td>
              </tr>
              <tr>
                <td>
                    <label for="cfax">Fax</label>
                </td>
                <td>
                  <input id="cfax" type="text" name="cfax" value="">
                </td>
              </tr>
              <tr>
                <td>
                    <label for="cemail">Email</label>
                </td>
                <td>
                  <input id="cemail" type="text" name="cemail" value="">
                </td>
              </tr>
              <tr>
                <td>
                    <label for="cweb">Website</label>
                </td>

                <td>
                  <input id="cweb" type="text" name="cweb" value="">
                </td>
              </tr>
              <tr>
                <td>
                    <label for="cabout">About</label>
                </td>
                <td>
                  <textarea id="cabout" name="cabout" rows="8" cols="80"></textarea>
                </td>
              </tr>
              <tr>
                <td>
                    <label for="csec">Select Sector</label>
                </td>
                <td>
                  <select id="csec" name="sector">

      											<option selected disabled>Select Sector</option>
      											<option value="Construction">Construction</option>
      											<option value="Coordinator">Coordinator</option>
      											<option value="Employer">Employer</option>
      											<option value="FinancialCareer">Financial Career</option>
      											<option value="InformationTechnology">Information Technology</option>
      											<option Value="Marketing">Marketing</option>
      											<option value="QualityCheck">Quality check</option>
      											<option value="RealEstate">Real Estate</option>
      											<option value="Sales">Sales</option>
      											<option value="Supporting">Supporting</option>
      											<option value="Teaching">Teaching</option>
                  </select>
                </td>
              </tr>
              <tr>
                <td align="center">
                  <input type="submit" value="submit">
                </td>
                <td align="center">
                  <input type="reset">
                </td>
              </tr>

            </table>
          </form>
    </div>
<!-- ----------------------------- IMPORTS & FIREBASE CONFIGURATION ------------------------------ -->
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-analytics.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyCUvex9l1eVH-frd2VUE9BYls_QHk3pvQY",
      authDomain: "research-interface.firebaseapp.com",
      databaseURL: "https://research-interface-default-rtdb.firebaseio.com",
      projectId: "research-interface",
      storageBucket: "research-interface.appspot.com",
      messagingSenderId: "1073383625995",
      appId: "1:1073383625995:web:af9ead3619abcb051c7e0e",
      measurementId: "G-9B1ZNKQH5C"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);

    import {getDatabase, ref, set, child, update, remove, get}
    from "https://www.gstatic.com/firebasejs/9.5.0/firebase-database.js";

    const db = getDatabase();

// ------------------------References------------------------------------
    document.getElementById('employerForm').addEventListener('submit',submitForm);


    function submitForm(evt){
      evt.preventDefault();

      var bus_name    = document.getElementById("cname").value;
      var bus_add     = document.getElementById("cadd").value;
      var bus_tel     = document.getElementById("ctel").value;
      var bus_fax     = document.getElementById("cfax").value;
      var bus_email   = document.getElementById("cemail").value;
      var bus_website = document.getElementById("cweb").value;
      var bus_about   = document.getElementById("cabout").value;
      var bus_sector  = document.getElementById("csec").value;

      saveData(bus_name, bus_add, bus_tel, bus_fax, bus_email, bus_website, bus_about, bus_sector);

    }

    function saveData(bus_name, bus_add, bus_tel, bus_fax, bus_email, bus_website, bus_about, bus_sector){
      set(ref(db, "Businesses/"+ bus_name),{
        Business_Name: bus_name,
        Address:    bus_add,
        Telephone:  bus_tel,
        Fax:        bus_fax,
        Email:      bus_email,
        Website:    bus_website,
        About:      bus_about,
        Sector:     bus_sector
      })
      .then(()=>{
        alert("Data inserted successfully! atlaaaast!!!")
      })
      .catch((error)=>{
        alert("Something went wrong, error: "+error);
      });
    }
  </script>
    <!-- <script type="module" src="script.js"></script> -->
</html>
